<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculator</title>
    <style>
        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: background-color 0.3s, color 0.3s, border-color 0.3s;
        }

        body {
            font-family: 'Roboto', sans-serif;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* Header Styles */
        header {
            background-color: #4CAF50;
            color: white;
            padding: 15px;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        /* Navigation Styles */
        nav {
            background-color: #f8f8f8;
            border-bottom: 1px solid #ddd;
            display: flex;
            overflow-x: auto;
            white-space: nowrap;
        }

        nav button {
            background: none;
            border: none;
            padding: 12px 20px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        nav button:hover {
            background-color: #ececec;
        }

        nav button.active {
            background-color: #e0e0e0;
            font-weight: bold;
            border-bottom: 3px solid #4CAF50;
        }

        /* Container Styles */
        .container {
            flex: 1;
            display: flex;
            flex-direction: column;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            width: 100%;
        }

        /* Calculator Section Styles */
        .calculator-section {
            display: none;
            flex-direction: column;
            flex: 1;
        }

        .calculator-section.active {
            display: flex;
        }

        /* Basic Calculator Styles */
        .calculator {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            grid-gap: 10px;
            margin-top: 20px;
            max-width: 400px;
        }

        .display {
            grid-column: 1 / span 5;
            background-color: #f4f4f4;
            padding: 20px;
            text-align: right;
            font-size: 24px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-bottom: 10px;
        }

        .calculator button {
            padding: 15px;
            font-size: 18px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: white;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .calculator button:hover {
            background-color: #f0f0f0;
        }

        .calculator button.operator {
            background-color: #f8f8f8;
        }

        .calculator button.equals {
            background-color: #4CAF50;
            color: white;
        }

        /* Fraction Calculator Styles */
        .fraction-calculator {
            display: flex;
            flex-direction: column;
            gap: 20px;
            max-width: 600px;
        }

        .fraction-sections {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .fraction-section {
            display: none;
            flex-direction: column;
            gap: 10px;
        }

        .fraction-section.active {
            display: flex;
        }

        .operation-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 10px;
        }

        .operation-buttons button {
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: white;
            cursor: pointer;
            flex: 1;
            min-width: 100px;
        }

        .operation-buttons button.active {
            background-color: #4CAF50;
            color: white;
        }

        .fraction-input {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .fraction-input input {
            width: 80px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .calculate-btn {
            padding: 10px 15px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .result {
            margin-top: 10px;
            padding: 15px;
            background-color: #f4f4f4;
            border-radius: 5px;
            font-size: 18px;
        }

        /* Percentage Calculator Styles */
        .percentage-calculator {
            display: flex;
            flex-direction: column;
            gap: 20px;
            max-width: 600px;
        }

        .percentage-sections {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .percentage-section {
            display: none;
            flex-direction: column;
            gap: 10px;
        }

        .percentage-section.active {
            display: flex;
        }

        .percentage-input {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .percentage-input input {
            width: 100px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        /* Sequence Calculator Styles */
        .sequence-calculator {
            display: flex;
            flex-direction: column;
            gap: 20px;
            max-width: 600px;
        }

        .sequence-inputs {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .input-group label {
            font-weight: bold;
        }

        .input-group input {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .sequence-results {
            display: flex;
            flex-direction: column;
            gap: 10px;
            background-color: #f4f4f4;
            padding: 15px;
            border-radius: 5px;
        }

        /* History Styles */
        .history {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .history-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-height: 400px;
            overflow-y: auto;
        }

        .history-item {
            padding: 10px;
            background-color: #f4f4f4;
            border-radius: 5px;
        }

        .clear-history {
            padding: 10px 15px;
            background-color: #f44336;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            align-self: flex-start;
        }

        /* Settings Styles */
        .settings {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .theme-selector {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .theme-dropdown {
            position: relative;
            max-width: 300px;
        }

        .theme-select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            appearance: none;
            cursor: pointer;
            background-color: white;
            font-size: 16px;
        }

        /* Replace double triangles with a custom icon */
        .theme-dropdown::after {
            content: "⚙️"; /* Gear icon instead of triangles */
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            pointer-events: none;
        }

        .theme-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 20px;
        }

        .theme-option {
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
            text-align: center;
            transition: transform 0.2s;
        }

        .theme-option:hover {
            transform: scale(1.05);
        }

        /* Responsive Styles */
        @media (max-width: 768px) {
            .calculator {
                grid-template-columns: repeat(4, 1fr);
            }

            .display {
                grid-column: 1 / span 4;
            }

            .theme-options {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }
        }

        @media (max-width: 480px) {
            .calculator {
                grid-template-columns: repeat(4, 1fr);
                grid-gap: 5px;
            }

            .calculator button {
                padding: 10px;
                font-size: 16px;
            }

            .theme-options {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* Theme Styles */
        /* Default Theme */
        .theme-default {
            --bg-color: #ffffff;
            --text-color: #333333;
            --header-bg: #4CAF50;
            --header-text: #ffffff;
            --btn-bg: #ffffff;
            --btn-text: #333333;
            --accent-color: #4CAF50;
            --font-family: 'Roboto', sans-serif;
        }

        /* Dark Theme */
        .theme-dark {
            --bg-color: #222222;
            --text-color: #f0f0f0;
            --header-bg: #333333;
            --header-text: #f0f0f0;
            --btn-bg: #444444;
            --btn-text: #f0f0f0;
            --accent-color: #7E57C2;
            --font-family: 'Montserrat', sans-serif;
        }

        /* Nature Theme */
        .theme-nature {
            --bg-color: #f5f9f0;
            --text-color: #2c3e1f;
            --header-bg: #5c9b4c;
            --header-text: #ffffff;
            --btn-bg: #dcebc5;
            --btn-text: #2c3e1f;
            --accent-color: #5c9b4c;
            --font-family: 'Quicksand', sans-serif;
        }

        /* Sunset Theme */
        .theme-sunset {
            --bg-color: #fff4e8;
            --text-color: #783c00;
            --header-bg: #ff7b00;
            --header-text: #ffffff;
            --btn-bg: #ffead0;
            --btn-text: #783c00;
            --accent-color: #ff7b00;
            --font-family: 'Poppins', sans-serif;
        }

        /* Ocean Theme */
        .theme-ocean {
            --bg-color: #e7f5fb;
            --text-color: #004d70;
            --header-bg: #0288d1;
            --header-text: #ffffff;
            --btn-bg: #c7e8fa;
            --btn-text: #004d70;
            --accent-color: #0288d1;
            --font-family: 'Lato', sans-serif;
        }

        /* Lavender Theme */
        .theme-lavender {
            --bg-color: #f5f0ff;
            --text-color: #47336b;
            --header-bg: #916dd5;
            --header-text: #ffffff;
            --btn-bg: #e6dbff;
            --btn-text: #47336b;
            --accent-color: #916dd5;
            --font-family: 'Source Sans Pro', sans-serif;
        }

        /* Cherry Theme */
        .theme-cherry {
            --bg-color: #fff0f5;
            --text-color: #7c002e;
            --header-bg: #e91e63;
            --header-text: #ffffff;
            --btn-bg: #ffd0e0;
            --btn-text: #7c002e;
            --accent-color: #e91e63;
            --font-family: 'Raleway', sans-serif;
        }

        /* Coffee Theme */
        .theme-coffee {
            --bg-color: #f5f1eb;
            --text-color: #4a3520;
            --header-bg: #795548;
            --header-text: #ffffff;
            --btn-bg: #e8dfd5;
            --btn-text: #4a3520;
            --accent-color: #795548;
            --font-family: 'Ubuntu', sans-serif;
        }

        /* Mint Theme */
        .theme-mint {
            --bg-color: #f0f9f5;
            --text-color: #00695c;
            --header-bg: #00bfa5;
            --header-text: #ffffff;
            --btn-bg: #d0f0e6;
            --btn-text: #00695c;
            --accent-color: #00bfa5;
            --font-family: 'Nunito', sans-serif;
        }

        /* Berry Theme */
        .theme-berry {
            --bg-color: #faf0f5;
            --text-color: #880e4f;
            --header-bg: #ad1457;
            --header-text: #ffffff;
            --btn-bg: #f8d0e0;
            --btn-text: #880e4f;
            --accent-color: #ad1457;
            --font-family: 'Mulish', sans-serif;
        }

        /* Slate Theme */
        .theme-slate {
            --bg-color: #eceff1;
            --text-color: #263238;
            --header-bg: #455a64;
            --header-text: #ffffff;
            --btn-bg: #cfd8dc;
            --btn-text: #263238;
            --accent-color: #455a64;
            --font-family: 'Open Sans', sans-serif;
        }

        /* Retro Theme */
        .theme-retro {
            --bg-color: #f5f5dc;
            --text-color: #8b4513;
            --header-bg: #cd853f;
            --header-text: #ffffff;
            --btn-bg: #e8e8c8;
            --btn-text: #8b4513;
            --accent-color: #cd853f;
            --font-family: 'VT323', monospace;
        }

        /* Futuristic Theme */
        .theme-futuristic {
            --bg-color: #e8f0fe;
            --text-color: #01579b;
            --header-bg: #2196f3;
            --header-text: #ffffff;
            --btn-bg: #bbdefb;
            --btn-text: #01579b;
            --accent-color: #2196f3;
            --font-family: 'Orbitron', sans-serif;
        }

        /* Pastel Theme */
        .theme-pastel {
            --bg-color: #f8f6ff;
            --text-color: #6a4c93;
            --header-bg: #b39ddb;
            --header-text: #ffffff;
            --btn-bg: #e1d9f5;
            --btn-text: #6a4c93;
            --accent-color: #b39ddb;
            --font-family: 'Comfortaa', cursive;
        }

        /* Neon Theme */
        .theme-neon {
            --bg-color: #0d0d0d;
            --text-color: #00ff00;
            --header-bg: #330033;
            --header-text: #ff00ff;
            --btn-bg: #1a1a1a;
            --btn-text: #00ff00;
            --accent-color: #ff00ff;
            --font-family: 'Audiowide', cursive;
        }

        /* Autumn Theme */
        .theme-autumn {
            --bg-color: #fff8e7;
            --text-color: #8b4000;
            --header-bg: #ff6f00;
            --header-text: #ffffff;
            --btn-bg: #ffe0b2;
            --btn-text: #8b4000;
            --accent-color: #ff6f00;
            --font-family: 'Merriweather', serif;
        }

        /* Winter Theme */
        .theme-winter {
            --bg-color: #e8f4fb;
            --text-color: #0d47a1;
            --header-bg: #42a5f5;
            --header-text: #ffffff;
            --btn-bg: #c7e3fa;
            --btn-text: #0d47a1;
            --accent-color: #42a5f5;
            --font-family: 'Playfair Display', serif;
        }

        /* Elegant Theme */
        .theme-elegant {
            --bg-color: #f9f9f9;
            --text-color: #333333;
            --header-bg: #9e9e9e;
            --header-text: #ffffff;
            --btn-bg: #e0e0e0;
            --btn-text: #333333;
            --accent-color: #9e9e9e;
            --font-family: 'Cormorant Garamond', serif;
        }

        /* Vibrant Theme */
        .theme-vibrant {
            --bg-color: #fffde7;
            --text-color: #ff6f00;
            --header-bg: #ffeb3b;
            --header-text: #ff6f00;
            --btn-bg: #fff9c4;
            --btn-text: #ff6f00;
            --accent-color: #ffeb3b;
            --font-family: 'Baloo 2', cursive;
        }

        /* Vintage Theme */
        .theme-vintage {
            --bg-color: #f3e5d8;
            --text-color: #5d4037;
            --header-bg: #8d6e63;
            --header-text: #ffffff;
            --btn-bg: #e3d0c3;
            --btn-text: #5d4037;
            --accent-color: #8d6e63;
            --font-family: 'IM Fell English', serif;
        }

        /* Apply Theme Variables */
        body.themed {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: var(--font-family);
        }

        body.themed header {
            background-color: var(--header-bg);
            color: var(--header-text);
        }

        body.themed nav {
            background-color: var(--bg-color);
            border-color: var(--accent-color);
        }

        body.themed nav button {
            color: var(--text-color);
        }

        body.themed nav button:hover {
            background-color: var(--btn-bg);
        }

        body.themed nav button.active {
            background-color: var(--btn-bg);
            border-color: var(--accent-color);
        }

        body.themed .calculator button {
            background-color: var(--btn-bg);
            color: var(--btn-text);
            border-color: var(--accent-color);
        }

        body.themed .calculator button.equals {
            background-color: var(--accent-color);
            color: var(--header-text);
        }

        body.themed .display,
        body.themed .result,
        body.themed .history-item,
        body.themed .sequence-results {
            background-color: var(--btn-bg);
            color: var(--btn-text);
            border-color: var(--accent-color);
            
        }

        body.themed .display {
            max-width: 400px;
        }

        body.themed input,
        body.themed select {
            background-color: var(--btn-bg);
            color: var(--btn-text);
            border-color: var(--accent-color);
        }

        body.themed .calculate-btn,
        body.themed .operation-buttons button.active {
            background-color: var(--accent-color);
            color: var(--header-text);
        }
    </style>
</head>
<body class="themed theme-default">
    <header>
        <h1>Calculator</h1>
    </header>
    <nav>
        <button class="nav-btn active" data-section="basic">Calculator</button>
        <button class="nav-btn" data-section="fraction">Fraction</button>
        <button class="nav-btn" data-section="percentage">Percentage</button>
        <button class="nav-btn" data-section="arithmetic">Arithmetic Seq</button>
        <button class="nav-btn" data-section="geometric">Geometric Seq</button>
        <button class="nav-btn" data-section="fibonacci">Fibonacci Seq</button>
        <button class="nav-btn" data-section="history">History</button>
        <button class="nav-btn" data-section="settings">Settings</button>
    </nav>
    <div class="container">
        <!-- Basic Calculator Section -->
        <section class="calculator-section active" id="basic-section">
            <div class="display">0</div>
            <div class="calculator">
                <button class="function" data-function="sin">sin</button>
                <button class="function" data-function="cos">cos</button>
                <button class="function" data-function="tan">tan</button>
                <button class="function" data-function="log">log</button>
                <button class="function" data-function="ln">ln</button>
                
                <button class="clear">C</button>
                <button class="sign">±</button>
                <button class="percent">%</button>
                <button class="operator" data-operator="/">÷</button>
                <button class="operator" data-operator="*">×</button>
                
                <button class="number" data-number="7">7</button>
                <button class="number" data-number="8">8</button>
                <button class="number" data-number="9">9</button>
                <button class="operator" data-operator="-">-</button>
                <button class="parenthesis" data-parenthesis="(">(</button>
                
                <button class="number" data-number="4">4</button>
                <button class="number" data-number="5">5</button>
                <button class="number" data-number="6">6</button>
                <button class="operator" data-operator="+">+</button>
                <button class="parenthesis" data-parenthesis=")">)</button>
                
                <button class="number" data-number="1">1</button>
                <button class="number" data-number="2">2</button>
                <button class="number" data-number="3">3</button>
                <button class="sqrt">√</button>
                <button class="power">^</button>
                
                <button class="number" data-number="0">0</button>
                <button class="decimal">.</button>
                <button class="factorial">!</button>
                <button class="pi">π</button>
                <button class="equals">=</button>
            </div>
        </section>

        <!-- Fraction Calculator Section -->
        <section class="calculator-section" id="fraction-section">
            <h2>Fraction Calculator</h2>
            <div class="fraction-calculator">
                <div class="operation-buttons">
                    <button class="fraction-operation active" data-operation="add">Add</button>
                    <button class="fraction-operation" data-operation="subtract">Subtract</button>
                    <button class="fraction-operation" data-operation="multiply">Multiply</button>
                    <button class="fraction-operation" data-operation="divide">Divide</button>
                    <button class="fraction-operation" data-operation="simplify">Simplify</button>
                    <button class="fraction-operation" data-operation="convert">Convert</button>
                </div>
                
                <div class="fraction-sections">
                    <div class="fraction-section active" id="fraction-operation-section">
                        <div class="fraction-input">
                            <span>First Fraction</span>
                            <input type="number" id="frac1-num" placeholder="Numerator">
                            <span>/</span>
                            <input type="number" id="frac1-den" placeholder="Denominator">
                        </div>
                        <div class="fraction-input">
                            <span>Second Fraction</span>
                            <input type="number" id="frac2-num" placeholder="Numerator">
                            <span>/</span>
                            <input type="number" id="frac2-den" placeholder="Denominator">
                        </div>
                        <button class="calculate-btn" id="fraction-calculate">Calculate</button>
                        <div class="result" id="fraction-result">Result:</div>
                    </div>
                    
                    <div class="fraction-section" id="fraction-convert-section">
                        <div class="operation-buttons">
                            <button class="conversion-type active" data-type="to-decimal">Fraction to Decimal</button>
                            <button class="conversion-type" data-type="to-fraction">Decimal to Fraction</button>
                        </div>
                        
                        <div class="conversion-sections">
                            <div class="fraction-input" id="to-decimal-section">
                                <span>Fraction</span>
                                <input type="number" id="convert-num" placeholder="Numerator">
                                <span>/</span>
                                <input type="number" id="convert-den" placeholder="Denominator">
                            </div>
                            
                            <div class="fraction-input" id="to-fraction-section" style="display: none;">
                                <span>Decimal</span>
                                <input type="number" id="convert-decimal" placeholder="Decimal">
                            </div>
                        </div>
                        
                        <button class="calculate-btn" id="convert-calculate">Calculate</button>
                        <div class="result" id="convert-result">Result:</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Percentage Calculator Section -->
        <section class="calculator-section" id="percentage-section">
            <h2>Percentage Calculator</h2>
            <div class="percentage-calculator">
                <div class="operation-buttons">
                    <button class="percentage-operation active" data-operation="what-is">What is % of</button>
                    <button class="percentage-operation" data-operation="is-what">Is what % of</button>
                    <button class="percentage-operation" data-operation="is-percent">Is % of what</button>
                    <button class="percentage-operation" data-operation="percentage-change">Percentage Change</button>
                </div>
                
                <div class="percentage-sections">
                    <div class="percentage-section active" id="what-is-section">
                        <div class="percentage-input">
                            <span>What is</span>
                            <input type="number" id="what-is-percent" placeholder="Percentage">
                            <span>% of</span>
                            <input type="number" id="what-is-value" placeholder="Value">
                            <span>?</span>
                        </div>
                        <button class="calculate-btn" id="what-is-calculate">Calculate</button>
                        <div class="result" id="what-is-result">Result:</div>
                    </div>
                    
                    <div class="percentage-section" id="is-what-section">
                        <div class="percentage-input">
                            <span>Value 1 is what % of Value 2?</span>
                        </div>
                        <div class="percentage-input">
                            <input type="number" id="is-what-value1" placeholder="Value 1">
                            <span>is what % of</span>
                            <input type="number" id="is-what-value2" placeholder="Value 2">
                            <span>?</span>
                        </div>
                        <button class="calculate-btn" id="is-what-calculate">Calculate</button>
                        <div class="result" id="is-what-result">Result:</div>
                    </div>
                    
                    <div class="percentage-section" id="is-percent-section">
                        <div class="percentage-input">
                            <span>Value is X% of what?</span>
                        </div>
                        <div class="percentage-input">
                            <input type="number" id="is-percent-value" placeholder="Value">
                            <span>is</span>
                            <input type="number" id="is-percent-percent" placeholder="Percentage">
                            <span>% of what?</span>
                        </div>
                        <button class="calculate-btn" id="is-percent-calculate">Calculate</button>
                        <div class="result" id="is-percent-result">Result:</div>
                    </div>
                    
                    <div class="percentage-section" id="percentage-change-section">
                        <div class="operation-buttons">
                            <button class="change-type active" data-type="increase">Increase</button>
                            <button class="change-type" data-type="decrease">Decrease</button>
                        </div>
                        <div class="percentage-input">
                            <input type="number" id="change-value" placeholder="Value">
                            <span id="change-type-text">increase</span>
                            <input type="number" id="change-percent" placeholder="Percentage">
                            <span>% =</span>
                        </div>
                        <button class="calculate-btn" id="change-calculate">Calculate</button>
                        <div class="result" id="change-result">Result:</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Arithmetic Sequence Calculator Section -->
        <section class="calculator-section" id="arithmetic-section">
            <h2>Arithmetic Sequence Calculator</h2>
            <div class="sequence-calculator">
                <div class="sequence-inputs">
                    <div class="input-group">
                        <label for="arith-a1">First Term (a₁)</label>
                        <input type="number" id="arith-a1" placeholder="Enter first term">
                    </div>
                    <div class="input-group">
                        <label for="arith-d">Common Difference (d)</label>
                        <input type="number" id="arith-d" placeholder="Enter common difference">
                    </div>
                    <div class="input-group">
                        <label for="arith-n">Number of Terms (n)</label>
                        <input type="number" id="arith-n" placeholder="Enter number of terms">
                    </div>
                    <button class="calculate-btn" id="arith-calculate">Calculate</button>
                </div>
                <div class="sequence-results">
                    <p><strong>Results:</strong></p>
                    <p id="arith-nth-term">n-th Term:</p>
                    <p id="arith-sum">Sum of Sequence:</p>
                    <p id="arith-sequence">Sequence:</p>
                </div>
            </div>
        </section>

        <!-- Geometric Sequence Calculator Section -->
        <section class="calculator-section" id="geometric-section">
            <h2>Geometric Sequence Calculator</h2>
            <div class="sequence-calculator">
                <div class="sequence-inputs">
                    <div class="input-group">
                        <label for="geo-a1">First Term (a₁)</label>
                        <input type="number" id="geo-a1" placeholder="Enter first term">
                    </div>
                    <div class="input-group">
                        <label for="geo-r">Common Ratio (r)</label>
                        <input type="number" id="geo-r" placeholder="Enter common ratio">
                    </div>
                    <div class="input-group">
                        <label for="geo-n">Number of Terms (n)</label>
                        <input type="number" id="geo-n" placeholder="Enter number of terms">
                    </div>
                    <button class="calculate-btn" id="geo-calculate">Calculate</button>
                </div>
                <div class="sequence-results">
                    <p><strong>Results:</strong></p>
                    <p id="geo-nth-term">n-th Term:</p>
                    <p id="geo-sum">Sum of Sequence:</p>
                    <p id="geo-sequence">Sequence:</p>
                </div>
            </div>
        </section>

        <!-- Fibonacci Sequence Calculator Section -->
        <section class="calculator-section" id="fibonacci-section">
            <h2>Fibonacci Sequence Calculator</h2>
            <div class="sequence-calculator">
                <div class="sequence-inputs">
                    <div class="input-group">
                        <label for="fib-n">Number of Terms (n)</label>
                        <input type="number" id="fib-n" placeholder="Enter number of terms">
                    </div>
                    <button class="calculate-btn" id="fib-calculate">Calculate</button>
                </div>
                <div class="sequence-results">
                    <p><strong>Results:</strong></p>
                    <p id="fib-nth-term">n-th Term:</p>
                    <p id="fib-sequence">Sequence:</p>
                </div>
            </div>
        </section>

        <!-- History Section -->
        <section class="calculator-section" id="history-section">
            <h2>History</h2>
            <div class="history">
                <div class="history-list" id="history-list">
                    <p>No calculations yet</p>
                </div>
                <button class="clear-history" id="clear-history">Clear History</button>
            </div>
        </section>

        <!-- Settings Section -->
        <section class="calculator-section" id="settings-section">
            <h2>Settings & Themes</h2>
            <div class="settings">
                <div class="theme-selector">
                    <h3>Select Theme</h3>
                    <div class="theme-dropdown">
                        <select class="theme-select" id="theme-select">
                            <option value="default">Default</option>
                            <option value="dark">Dark</option>
                            <option value="nature">Nature</option>
                            <option value="sunset">Sunset</option>
                            <option value="ocean">Ocean</option>
                            <option value="lavender">Lavender</option>
                            <option value="cherry">Cherry</option>
                            <option value="coffee">Coffee</option>
                            <option value="mint">Mint</option>
                            <option value="berry">Berry</option>
                            <option value="slate">Slate</option>
                            <option value="retro">Retro</option>
                            <option value="futuristic">Futuristic</option>
                            <option value="pastel">Pastel</option>
                            <option value="neon">Neon</option>
                            <option value="autumn">Autumn</option>
                            <option value="winter">Winter</option>
                            <option value="elegant">Elegant</option>
                            <option value="vibrant">Vibrant</option>
                            <option value="vintage">Vintage</option>
                        </select>
                    </div>
                    <div class="theme-options">
                        <div class="theme-option" data-theme="default">Default</div>
                        <div class="theme-option" data-theme="dark">Dark</div>
                        <div class="theme-option" data-theme="nature">Nature</div>
                        <div class="theme-option" data-theme="sunset">Sunset</div>
                        <div class="theme-option" data-theme="ocean">Ocean</div>
                        <div class="theme-option" data-theme="lavender">Lavender</div>
                        <div class="theme-option" data-theme="cherry">Cherry</div>
                        <div class="theme-option" data-theme="coffee">Coffee</div>
                        <div class="theme-option" data-theme="mint">Mint</div>
                        <div class="theme-option" data-theme="berry">Berry</div>
                        <div class="theme-option" data-theme="slate">Slate</div>
                        <div class="theme-option" data-theme="retro">Retro</div>
                        <div class="theme-option" data-theme="futuristic">Futuristic</div>
                        <div class="theme-option" data-theme="pastel">Pastel</div>
                        <div class="theme-option" data-theme="neon">Neon</div>
                        <div class="theme-option" data-theme="autumn">Autumn</div>
                        <div class="theme-option" data-theme="winter">Winter</div>
                        <div class="theme-option" data-theme="elegant">Elegant</div>
                        <div class="theme-option" data-theme="vibrant">Vibrant</div>
                        <div class="theme-option" data-theme="vintage">Vintage</div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <script>
        // DOM Elements
        const display = document.querySelector('.display');
        const numberButtons = document.querySelectorAll('.number');
        const operatorButtons = document.querySelectorAll('.operator');
        const clearButton = document.querySelector('.clear');
        const equalsButton = document.querySelector('.equals');
        const decimalButton = document.querySelector('.decimal');
        const signButton = document.querySelector('.sign');
        const percentButton = document.querySelector('.percent');
        const sqrtButton = document.querySelector('.sqrt');
        const powerButton = document.querySelector('.power');
        const parenthesisButtons = document.querySelectorAll('.parenthesis');
        const functionButtons = document.querySelectorAll('.function');
        const piButton = document.querySelector('.pi');
        const factorialButton = document.querySelector('.factorial');
        const navButtons = document.querySelectorAll('.nav-btn');
        const calculatorSections = document.querySelectorAll('.calculator-section');
        const themeSelect = document.getElementById('theme-select');
        const themeOptions = document.querySelectorAll('.theme-option');
        
        // Font URLs for dynamic loading
        const fontUrls = {
            'Roboto': 'https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap',
            'Montserrat': 'https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap',
            'Quicksand': 'https://fonts.googleapis.com/css2?family=Quicksand:wght@400;700&display=swap',
            'Poppins': 'https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap',
            'Lato': 'https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap',
            'Source Sans Pro': 'https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;700&display=swap',
            'Raleway': 'https://fonts.googleapis.com/css2?family=Raleway:wght@400;700&display=swap',
            'Ubuntu': 'https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;700&display=swap',
            'Nunito': 'https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap',
            'Mulish': 'https://fonts.googleapis.com/css2?family=Mulish:wght@400;700&display=swap',
            'Open Sans': 'https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&display=swap',
            'VT323': 'https://fonts.googleapis.com/css2?family=VT323&display=swap',
            'Orbitron': 'https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap',
            'Comfortaa': 'https://fonts.googleapis.com/css2?family=Comfortaa:wght@400;700&display=swap',
            'Audiowide': 'https://fonts.googleapis.com/css2?family=Audiowide&display=swap',
            'Merriweather': 'https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&display=swap',
            'Playfair Display': 'https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&display=swap',
            'Cormorant Garamond': 'https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;700&display=swap',
            'Baloo 2': 'https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;700&display=swap',
            'IM Fell English': 'https://fonts.googleapis.com/css2?family=IM+Fell+English&display=swap'
        };

        // Function to load a font dynamically
        function loadFont(fontFamily) {
            if (fontUrls[fontFamily]) {
                const link = document.createElement('link');
                link.rel = 'stylesheet';
                link.href = fontUrls[fontFamily];
                document.head.appendChild(link);
            }
        }

        // Load default font
        loadFont('Roboto');

        // Calculator Variables
        let currentInput = '0';
        let previousInput = '';
        let currentOperation = null;
        let shouldResetInput = false;
        let history = [];

        // Initialize the calculator
        function init() {
            updateDisplay();
            setupCalculationHistory();
            setupFractionCalculator();
            setupPercentageCalculator();
            setupArithmeticSequenceCalculator();
            setupGeometricSequenceCalculator();
            setupFibonacciSequenceCalculator();
        }

        // Update the display
        function updateDisplay() {
            display.textContent = currentInput;
        }

        // Handle number button clicks
        numberButtons.forEach(button => {
            button.addEventListener('click', () => {
                const number = button.getAttribute('data-number');
                appendNumber(number);
            });
        });

        function appendNumber(number) {
            if (currentInput === '0' || shouldResetInput) {
                currentInput = number;
                shouldResetInput = false;
            } else {
                currentInput += number;
            }
            updateDisplay();
        }

        // Handle operator button clicks
        operatorButtons.forEach(button => {
            button.addEventListener('click', () => {
                const operator = button.getAttribute('data-operator');
                handleOperator(operator);
            });
        });

        function handleOperator(operator) {
            if (currentOperation !== null) {
                calculate();
            }
            
            previousInput = currentInput;
            currentOperation = operator;
            shouldResetInput = true;
        }

        // Handle clear button click
        clearButton.addEventListener('click', () => {
            currentInput = '0';
            previousInput = '';
            currentOperation = null;
            shouldResetInput = false;
            updateDisplay();
        });

        // Handle equals button click
        equalsButton.addEventListener('click', () => {
            calculate();
        });

        // Perform calculation
        function calculate() {
            if (currentOperation === null || shouldResetInput) return;
            
            const prev = parseFloat(previousInput);
            const current = parseFloat(currentInput);
            let result;
            
            switch (currentOperation) {
                case '+':
                    result = prev + current;
                    break;
                case '-':
                    result = prev - current;
                    break;
                case '*':
                    result = prev * current;
                    break;
                case '/':
                    result = prev / current;
                    break;
                default:
                    return;
            }
            
            const calculation = `${previousInput} ${currentOperation} ${currentInput} = ${result}`;
            addToHistory(calculation);
            
            currentInput = result.toString();
            currentOperation = null;
            shouldResetInput = true;
            updateDisplay();
        }

        // Handle decimal button click
        decimalButton.addEventListener('click', () => {
            if (shouldResetInput) {
                currentInput = '0.';
                shouldResetInput = false;
            } else if (!currentInput.includes('.')) {
                currentInput += '.';
            }
            updateDisplay();
        });

        // Handle sign button click
        signButton.addEventListener('click', () => {
            currentInput = (parseFloat(currentInput) * -1).toString();
            updateDisplay();
        });

        // Handle percent button click
        percentButton.addEventListener('click', () => {
            currentInput = (parseFloat(currentInput) / 100).toString();
            updateDisplay();
        });

        // Handle sqrt button click
        sqrtButton.addEventListener('click', () => {
            currentInput = Math.sqrt(parseFloat(currentInput)).toString();
            updateDisplay();
        });

        // Handle power button click
        powerButton.addEventListener('click', () => {
            previousInput = currentInput;
            currentOperation = '^';
            shouldResetInput = true;
        });

        // Handle parenthesis button clicks
        parenthesisButtons.forEach(button => {
            button.addEventListener('click', () => {
                const parenthesis = button.getAttribute('data-parenthesis');
                appendParenthesis(parenthesis);
            });
        });

        function appendParenthesis(parenthesis) {
            if (currentInput === '0' || shouldResetInput) {
                currentInput = parenthesis;
                shouldResetInput = false;
            } else {
                currentInput += parenthesis;
            }
            updateDisplay();
        }

        // Handle function button clicks
        functionButtons.forEach(button => {
            button.addEventListener('click', () => {
                const func = button.getAttribute('data-function');
                handleFunction(func);
            });
        });

        function handleFunction(func) {
            const value = parseFloat(currentInput);
            let result;
            
            switch (func) {
                case 'sin':
                    result = Math.sin(value * Math.PI / 180);
                    break;
                case 'cos':
                    result = Math.cos(value * Math.PI / 180);
                    break;
                case 'tan':
                    result = Math.tan(value * Math.PI / 180);
                    break;
                case 'log':
                    result = Math.log10(value);
                    break;
                case 'ln':
                    result = Math.log(value);
                    break;
                default:
                    return;
            }
            
            const calculation = `${func}(${currentInput}) = ${result}`;
            addToHistory(calculation);
            
            currentInput = result.toString();
            updateDisplay();
        }

        // Handle pi button click
        piButton.addEventListener('click', () => {
            currentInput = Math.PI.toString();
            updateDisplay();
        });

        // Handle factorial button click
        factorialButton.addEventListener('click', () => {
            const num = parseInt(currentInput);
            let result = 1;
            
            for (let i = 2; i <= num; i++) {
                result *= i;
            }
            
            const calculation = `${currentInput}! = ${result}`;
            addToHistory(calculation);
            
            currentInput = result.toString();
            updateDisplay();
        });

        // Navigation between calculator sections
        navButtons.forEach(button => {
            button.addEventListener('click', () => {
                const section = button.getAttribute('data-section');
                switchSection(section);
            });
        });

        function switchSection(section) {
            navButtons.forEach(button => {
                button.classList.remove('active');
                if (button.getAttribute('data-section') === section) {
                    button.classList.add('active');
                }
            });
            
            calculatorSections.forEach(calcSection => {
                calcSection.classList.remove('active');
                if (calcSection.id === `${section}-section`) {
                    calcSection.classList.add('active');
                }
            });
        }

        // Handle history
        function addToHistory(calculation) {
            history.push(calculation);
            updateHistoryDisplay();
        }

        function updateHistoryDisplay() {
            const historyList = document.getElementById('history-list');
            
            if (history.length === 0) {
                historyList.innerHTML = '<p>No calculations yet</p>';
                return;
            }
            
            historyList.innerHTML = '';
            
            history.forEach(calculation => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';
                historyItem.textContent = calculation;
                historyList.appendChild(historyItem);
            });
        }

        function setupCalculationHistory() {
            const clearHistoryButton = document.getElementById('clear-history');
            
            clearHistoryButton.addEventListener('click', () => {
                history = [];
                updateHistoryDisplay();
            });
        }

        // Fraction Calculator
        function setupFractionCalculator() {
            // Operation selection
            const operationButtons = document.querySelectorAll('.fraction-operation');
            const fractionSections = document.querySelectorAll('.fraction-section');
            
            operationButtons.forEach(button => {
                button.addEventListener('click', () => {
                    operationButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    
                    const operation = button.getAttribute('data-operation');
                    
                    fractionSections.forEach(section => {
                        section.classList.remove('active');
                    });
                    
                    if (operation === 'convert') {
                        document.getElementById('fraction-convert-section').classList.add('active');
                    } else {
                        document.getElementById('fraction-operation-section').classList.add('active');
                    }
                });
            });
            
            // Conversion type selection
            const conversionTypeButtons = document.querySelectorAll('.conversion-type');
            
            conversionTypeButtons.forEach(button => {
                button.addEventListener('click', () => {
                    conversionTypeButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    
                    const type = button.getAttribute('data-type');
                    
                    if (type === 'to-decimal') {
                        document.getElementById('to-decimal-section').style.display = 'flex';
                        document.getElementById('to-fraction-section').style.display = 'none';
                    } else {
                        document.getElementById('to-decimal-section').style.display = 'none';
                        document.getElementById('to-fraction-section').style.display = 'flex';
                    }
                });
            });
            
            // Fraction operations calculation
            const fractionCalculateButton = document.getElementById('fraction-calculate');
            
            fractionCalculateButton.addEventListener('click', () => {
                const num1 = parseInt(document.getElementById('frac1-num').value);
                const den1 = parseInt(document.getElementById('frac1-den').value);
                const num2 = parseInt(document.getElementById('frac2-num').value);
                const den2 = parseInt(document.getElementById('frac2-den').value);
                
                if (isNaN(num1) || isNaN(den1) || den1 === 0) {
                    document.getElementById('fraction-result').textContent = 'Invalid first fraction';
                    return;
                }
                
                const activeOperation = document.querySelector('.fraction-operation.active').getAttribute('data-operation');
                
                if (activeOperation !== 'simplify' && (isNaN(num2) || isNaN(den2) || den2 === 0)) {
                    document.getElementById('fraction-result').textContent = 'Invalid second fraction';
                    return;
                }
                
                let result, resultText;
                
                switch (activeOperation) {
                    case 'add':
                        result = addFractions(num1, den1, num2, den2);
                        resultText = `${num1}/${den1} + ${num2}/${den2} = ${result.num}/${result.den}`;
                        break;
                    case 'subtract':
                        result = subtractFractions(num1, den1, num2, den2);
                        resultText = `${num1}/${den1} - ${num2}/${den2} = ${result.num}/${result.den}`;
                        break;
                    case 'multiply':
                        result = multiplyFractions(num1, den1, num2, den2);
                        resultText = `${num1}/${den1} × ${num2}/${den2} = ${result.num}/${result.den}`;
                        break;
                    case 'divide':
                        result = divideFractions(num1, den1, num2, den2);
                        resultText = `${num1}/${den1} ÷ ${num2}/${den2} = ${result.num}/${result.den}`;
                        break;
                    case 'simplify':
                        result = simplifyFraction(num1, den1);
                        resultText = `${num1}/${den1} simplified = ${result.num}/${result.den}`;
                        break;
                }
                
                document.getElementById('fraction-result').textContent = `Result: ${resultText}`;
                addToHistory(resultText);
            });
            
            // Conversion calculation
            const convertCalculateButton = document.getElementById('convert-calculate');
            
            convertCalculateButton.addEventListener('click', () => {
                const activeConversion = document.querySelector('.conversion-type.active').getAttribute('data-type');
                
                if (activeConversion === 'to-decimal') {
                    const num = parseInt(document.getElementById('convert-num').value);
                    const den = parseInt(document.getElementById('convert-den').value);
                    
                    if (isNaN(num) || isNaN(den) || den === 0) {
                        document.getElementById('convert-result').textContent = 'Invalid fraction';
                        return;
                    }
                    
                    const decimal = num / den;
                    document.getElementById('convert-result').textContent = `Result: ${num}/${den} = ${decimal}`;
                    addToHistory(`${num}/${den} = ${decimal}`);
                } else {
                    const decimal = parseFloat(document.getElementById('convert-decimal').value);
                    
                    if (isNaN(decimal)) {
                        document.getElementById('convert-result').textContent = 'Invalid decimal';
                        return;
                    }
                    
                    const fraction = decimalToFraction(decimal);
                    document.getElementById('convert-result').textContent = `Result: ${decimal} = ${fraction.num}/${fraction.den}`;
                    addToHistory(`${decimal} = ${fraction.num}/${fraction.den}`);
                }
            });
        }

        // Fraction operations
        function gcd(a, b) {
            return b === 0 ? a : gcd(b, a % b);
        }

        function simplifyFraction(num, den) {
            const divisor = gcd(Math.abs(num), Math.abs(den));
            return {
                num: num / divisor,
                den: den / divisor
            };
        }

        function addFractions(num1, den1, num2, den2) {
            const resultNum = num1 * den2 + num2 * den1;
            const resultDen = den1 * den2;
            return simplifyFraction(resultNum, resultDen);
        }

        function subtractFractions(num1, den1, num2, den2) {
            const resultNum = num1 * den2 - num2 * den1;
            const resultDen = den1 * den2;
            return simplifyFraction(resultNum, resultDen);
        }

        function multiplyFractions(num1, den1, num2, den2) {
            const resultNum = num1 * num2;
            const resultDen = den1 * den2;
            return simplifyFraction(resultNum, resultDen);
        }

        function divideFractions(num1, den1, num2, den2) {
            const resultNum = num1 * den2;
            const resultDen = den1 * num2;
            return simplifyFraction(resultNum, resultDen);
        }

        function decimalToFraction(decimal) {
            const precision = 1000000;
            let num = Math.round(decimal * precision);
            let den = precision;
            return simplifyFraction(num, den);
        }

        // Percentage Calculator
        function setupPercentageCalculator() {
            // Operation selection
            const percentageOperationButtons = document.querySelectorAll('.percentage-operation');
            const percentageSections = document.querySelectorAll('.percentage-section');
            
            percentageOperationButtons.forEach(button => {
                button.addEventListener('click', () => {
                    percentageOperationButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    
                    const operation = button.getAttribute('data-operation');
                    
                    percentageSections.forEach(section => {
                        section.classList.remove('active');
                    });
                    
                    document.getElementById(`${operation}-section`).classList.add('active');
                });
            });
            
            // Change type selection
            const changeTypeButtons = document.querySelectorAll('.change-type');
            
            changeTypeButtons.forEach(button => {
                button.addEventListener('click', () => {
                    changeTypeButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    
                    const type = button.getAttribute('data-type');
                    document.getElementById('change-type-text').textContent = type;
                });
            });
            
            // What is % of calculation
            document.getElementById('what-is-calculate').addEventListener('click', () => {
                const percent = parseFloat(document.getElementById('what-is-percent').value);
                const value = parseFloat(document.getElementById('what-is-value').value);
                
                if (isNaN(percent) || isNaN(value)) {
                    document.getElementById('what-is-result').textContent = 'Invalid input';
                    return;
                }
                
                const result = (percent / 100) * value;
                const resultText = `${percent}% of ${value} = ${result}`;
                document.getElementById('what-is-result').textContent = `Result: ${resultText}`;
                addToHistory(resultText);
            });
            
            // Is what % of calculation
            document.getElementById('is-what-calculate').addEventListener('click', () => {
                const value1 = parseFloat(document.getElementById('is-what-value1').value);
                const value2 = parseFloat(document.getElementById('is-what-value2').value);
                
                if (isNaN(value1) || isNaN(value2) || value2 === 0) {
                    document.getElementById('is-what-result').textContent = 'Invalid input';
                    return;
                }
                
                const result = (value1 / value2) * 100;
                const resultText = `${value1} is ${result}% of ${value2}`;
                document.getElementById('is-what-result').textContent = `Result: ${resultText}`;
                addToHistory(resultText);
            });
            
            // Is % of what calculation
            document.getElementById('is-percent-calculate').addEventListener('click', () => {
                const value = parseFloat(document.getElementById('is-percent-value').value);
                const percent = parseFloat(document.getElementById('is-percent-percent').value);
                
                if (isNaN(value) || isNaN(percent) || percent === 0) {
                    document.getElementById('is-percent-result').textContent = 'Invalid input';
                    return;
                }
                
                const result = value / (percent / 100);
                const resultText = `${value} is ${percent}% of ${result}`;
                document.getElementById('is-percent-result').textContent = `Result: ${resultText}`;
                addToHistory(resultText);
            });
            
            // Percentage change calculation
            document.getElementById('change-calculate').addEventListener('click', () => {
                const value = parseFloat(document.getElementById('change-value').value);
                const percent = parseFloat(document.getElementById('change-percent').value);
                const isIncrease = document.querySelector('.change-type.active').getAttribute('data-type') === 'increase';
                
                if (isNaN(value) || isNaN(percent)) {
                    document.getElementById('change-result').textContent = 'Invalid input';
                    return;
                }
                
                let result;
                if (isIncrease) {
                    result = value * (1 + percent / 100);
                } else {
                    result = value * (1 - percent / 100);
                }
                
                const changeType = isIncrease ? 'increase' : 'decrease';
                const resultText = `${value} ${changeType} by ${percent}% = ${result}`;
                document.getElementById('change-result').textContent = `Result: ${resultText}`;
                addToHistory(resultText);
            });
        }

        // Arithmetic Sequence Calculator
        function setupArithmeticSequenceCalculator() {
            document.getElementById('arith-calculate').addEventListener('click', () => {
                const a1 = parseFloat(document.getElementById('arith-a1').value);
                const d = parseFloat(document.getElementById('arith-d').value);
                const n = parseInt(document.getElementById('arith-n').value);
                
                if (isNaN(a1) || isNaN(d) || isNaN(n) || n <= 0) {
                    document.getElementById('arith-nth-term').textContent = 'n-th Term: Invalid input';
                    document.getElementById('arith-sum').textContent = 'Sum of Sequence: Invalid input';
                    document.getElementById('arith-sequence').textContent = 'Sequence: Invalid input';
                    return;
                }
                
                // Calculate nth term
                const nthTerm = a1 + (n - 1) * d;
                
                // Calculate sum
                const sum = (n / 2) * (2 * a1 + (n - 1) * d);
                
                // Generate sequence
                let sequence = [];
                for (let i = 0; i < n; i++) {
                    sequence.push(a1 + i * d);
                }
                
                document.getElementById('arith-nth-term').textContent = `n-th Term: ${nthTerm}`;
                document.getElementById('arith-sum').textContent = `Sum of Sequence: ${sum}`;
                document.getElementById('arith-sequence').textContent = `Sequence: ${sequence.join(', ')}`;
                
                const resultText = `Arithmetic Sequence: a₁=${a1}, d=${d}, n=${n}`;
                addToHistory(resultText);
            });
        }

        // Geometric Sequence Calculator
        function setupGeometricSequenceCalculator() {
            document.getElementById('geo-calculate').addEventListener('click', () => {
                const a1 = parseFloat(document.getElementById('geo-a1').value);
                const r = parseFloat(document.getElementById('geo-r').value);
                const n = parseInt(document.getElementById('geo-n').value);
                
                if (isNaN(a1) || isNaN(r) || isNaN(n) || n <= 0) {
                    document.getElementById('geo-nth-term').textContent = 'n-th Term: Invalid input';
                    document.getElementById('geo-sum').textContent = 'Sum of Sequence: Invalid input';
                    document.getElementById('geo-sequence').textContent = 'Sequence: Invalid input';
                    return;
                }
                
                // Calculate nth term
                const nthTerm = a1 * Math.pow(r, n - 1);
                
                // Calculate sum
                let sum;
                if (r === 1) {
                    sum = a1 * n;
                } else {
                    sum = a1 * (1 - Math.pow(r, n)) / (1 - r);
                }
                
                // Generate sequence
                let sequence = [];
                for (let i = 0; i < n; i++) {
                    sequence.push(a1 * Math.pow(r, i));
                }
                
                document.getElementById('geo-nth-term').textContent = `n-th Term: ${nthTerm}`;
                document.getElementById('geo-sum').textContent = `Sum of Sequence: ${sum}`;
                document.getElementById('geo-sequence').textContent = `Sequence: ${sequence.join(', ')}`;
                
                const resultText = `Geometric Sequence: a₁=${a1}, r=${r}, n=${n}`;
                addToHistory(resultText);
            });
        }

        // Fibonacci Sequence Calculator
        function setupFibonacciSequenceCalculator() {
            document.getElementById('fib-calculate').addEventListener('click', () => {
                const n = parseInt(document.getElementById('fib-n').value);
                
                if (isNaN(n) || n <= 0) {
                    document.getElementById('fib-nth-term').textContent = 'n-th Term: Invalid input';
                    document.getElementById('fib-sequence').textContent = 'Sequence: Invalid input';
                    return;
                }
                
                // Generate Fibonacci sequence
                let fibonacci = [0, 1];
                for (let i = 2; i < n; i++) {
                    fibonacci[i] = fibonacci[i - 1] + fibonacci[i - 2];
                }
                
                document.getElementById('fib-nth-term').textContent = `n-th Term: ${fibonacci[n - 1]}`;
                document.getElementById('fib-sequence').textContent = `Sequence: ${fibonacci.slice(0, n).join(', ')}`;
                
                const resultText = `Fibonacci Sequence: n=${n}`;
                addToHistory(resultText);
            });
        }

        // Theme handling
        themeSelect.addEventListener('change', () => {
            const theme = themeSelect.value;
            applyTheme(theme);
        });

        themeOptions.forEach(option => {
            option.addEventListener('click', () => {
                const theme = option.getAttribute('data-theme');
                themeSelect.value = theme;
                applyTheme(theme);
            });
        });

        function applyTheme(theme) {
            // Remove previous theme
            document.body.className = 'themed';
            document.body.classList.add(`theme-${theme}`);

            // Get font family from CSS variable
            const computedStyle = getComputedStyle(document.body);
            const fontFamily = computedStyle.getPropertyValue('--font-family').trim();
            
            // Load the font if it's not the default 'Roboto'
            if (fontFamily !== "'Roboto', sans-serif") {
                const cleanFontFamily = fontFamily.replace(/'/g, '').replace(/, sans-serif/g, '');
                loadFont(cleanFontFamily);
            }
        }

        // Initialize
        init();
    </script>
</body>
</html>
