<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math Calculators</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }
        
        body {
            line-height: 1.6;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        h1, h2, h3 {
            margin-bottom: 15px;
        }
        
        nav {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            background-color: #f1f1f1;
            padding: 10px;
        }
        
        nav a {
            text-decoration: none;
            color: #333;
            padding: 5px 10px;
        }
        
        nav a:hover {
            background-color: #ddd;
        }
        
        .calculator-section {
            margin-bottom: 30px;
        }
        
        .calculator {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            border: 1px solid #ddd;
        }
        
        .calculator h3 {
            border-bottom: 1px solid #ddd;
            padding-bottom: 10px;
            margin-bottom: 15px;
        }
        
        input, select, button {
            padding: 8px;
            margin-bottom: 10px;
            width: 100%;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        
        button:hover {
            background-color: #45a049;
        }
        
        .result {
            margin-top: 10px;
            padding: 10px;
            background-color: #e9f7ef;
            border-radius: 4px;
        }
        
        footer {
            text-align: center;
            margin-top: 50px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
        }
        
        @media (max-width: 768px) {
            nav {
                flex-direction: column;
            }
            
            nav a {
                margin-bottom: 5px;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>Math Calculators</h1>
        <!-- <p>Comprehensive mathematical tools for students, educators, and professionals</p> -->
    </header>
    
    <section id="percentage" class="calculator-section">
        <h2>Percentage Calculators</h2>
        
        <div id="average-percentage" class="calculator">
            <h3>Average Percentage Calculator</h3>
            <label for="avg-pct-values">Enter Values (comma separated)</label>
            <input type="text" id="avg-pct-values">
            <button onclick="calculateAveragePercentage()">Calculate Average</button>
            <div id="avg-pct-result" class="result">Your result will appear here</div>
        </div>
        
        <div id="fraction-to-percent" class="calculator">
            <h3>Fraction to Percent Calculator</h3>
            <label for="fraction-num">Numerator</label>
            <input type="number" id="fraction-num">
            <label for="fraction-den">Denominator</label>
            <input type="number" id="fraction-den">
            <button onclick="convertFractionToPercent()">Convert to Percent</button>
            <div id="fraction-to-percent-result" class="result">Your result will appear here</div>
        </div>
        
        <div id="decimal-to-percent" class="calculator">
            <h3>Decimal to Percent Calculator</h3>
            <label for="decimal-value">Decimal Value</label>
            <input type="number" step="0.0001" id="decimal-value">
            <button onclick="convertDecimalToPercent()">Convert to Percent</button>
            <div id="decimal-to-percent-result" class="result">Your result will appear here</div>
        </div>
        
        <div id="doubling-time" class="calculator">
            <h3>Doubling Time Calculator</h3>
            <label for="growth-rate">Growth Rate (%)</label>
            <input type="number" step="0.01" id="growth-rate">
            <button onclick="calculateDoublingTime()">Calculate Doubling Time</button>
            <div id="doubling-time-result" class="result">Your result will appear here</div>
        </div>
        
        <div id="percentage-calc" class="calculator">
            <h3>Percentage Calculator</h3>
            <label for="percentage-calc-type">Calculation Type</label>
            <select id="percentage-calc-type">
                <option value="percent-of">What is X% of Y?</option>
                <option value="percent-is">X is what percent of Y?</option>
                <option value="percent-what">X is Y% of what?</option>
            </select>
            <label for="percentage-x">X Value</label>
            <input type="number" step="0.01" id="percentage-x">
            <label for="percentage-y">Y Value</label>
            <input type="number" step="0.01" id="percentage-y">
            <button onclick="calculatePercentage()">Calculate</button>
            <div id="percentage-calc-result" class="result">Your result will appear here</div>
        </div>
        
        <div id="percentage-of-percentage" class="calculator">
            <h3>Percentage of Percentage Calculator</h3>
            <label for="first-percentage">First Percentage (%)</label>
            <input type="number" step="0.01" id="first-percentage">
            <label for="second-percentage">Second Percentage (%)</label>
            <input type="number" step="0.01" id="second-percentage">
            <button onclick="calculatePercentageOfPercentage()">Calculate</button>
            <div id="percentage-of-percentage-result" class="result">Your result will appear here</div>
        </div>
    </section>
    
    <section id="algebra" class="calculator-section">
        <h2>Algebra Calculators</h2>
        
        <div id="absolute-value-equation" class="calculator">
            <h3>Absolute Value Equation Calculator</h3>
            <label for="abs-equation">Enter Equation (e.g., |x+2|=5)</label>
            <input type="text" id="abs-equation">
            <button onclick="solveAbsoluteValueEquation()">Solve Equation</button>
            <div id="abs-equation-result" class="result">Your result will appear here</div>
        </div>
        
        <div id="absolute-value-inequalities" class="calculator">
            <h3>Absolute Value Inequalities Calculator</h3>
            <label for="abs-inequality">Enter Inequality (e.g., |x+2|>5)</label>
            <input type="text" id="abs-inequality">
            <button onclick="solveAbsoluteValueInequality()">Solve Inequality</button>
            <div id="abs-inequality-result" class="result">Your result will appear here</div>
        </div>
        
        <div id="polynomial-operations" class="calculator">
            <h3>Polynomial Operations Calculator</h3>
            <label for="first-polynomial">First Polynomial (e.g., 3x^2+2x-1)</label>
            <input type="text" id="first-polynomial">
            <label for="second-polynomial">Second Polynomial (e.g., x^2-1)</label>
            <input type="text" id="second-polynomial">
            <label for="polynomial-operation">Operation</label>
            <select id="polynomial-operation">
                <option value="add">Addition</option>
                <option value="subtract">Subtraction</option>
                <option value="multiply">Multiplication</option>
                <option value="divide">Division</option>
            </select>
            <button onclick="calculatePolynomialOperation()">Calculate</button>
            <div id="polynomial-result" class="result">Your result will appear here</div>
        </div>
        
        <div id="binomial-coefficient" class="calculator">
            <h3>Binomial Coefficient Calculator</h3>
            <label for="n-value">n Value</label>
            <input type="number" id="n-value" min="0">
            <label for="k-value">k Value</label>
            <input type="number" id="k-value" min="0">
            <button onclick="calculateBinomialCoefficient()">Calculate</button>
            <div id="binomial-result" class="result">Your result will appear here</div>
        </div>
        
        <div id="completing-the-square" class="calculator">
            <h3>Completing the Square Calculator</h3>
            <label for="quadratic-expression">Enter Quadratic Expression (e.g., x^2+6x+8)</label>
            <input type="text" id="quadratic-expression">
            <button onclick="completeTheSquare()">Complete the Square</button>
            <div id="square-completion-result" class="result">Your result will appear here</div>
        </div>
        
        <div id="complex-number" class="calculator">
            <h3>Complex Number Calculator</h3>
            <label for="first-complex">First Complex Number (a+bi format)</label>
            <input type="text" id="first-complex" placeholder="e.g., 2+3i">
            <label for="second-complex">Second Complex Number (a+bi format)</label>
            <input type="text" id="second-complex" placeholder="e.g., 1-4i">
            <label for="complex-operation">Operation</label>
            <select id="complex-operation">
                <option value="add">Addition</option>
                <option value="subtract">Subtraction</option>
                <option value="multiply">Multiplication</option>
                <option value="divide">Division</option>
            </select>
            <button onclick="calculateComplexOperation()">Calculate</button>
            <div id="complex-result" class="result">Your result will appear here</div>
        </div>
    </section>
    
    <section id="arithmetic" class="calculator-section">
        <h2>Arithmetic Calculators</h2>
        
        <div id="absolute-change" class="calculator">
            <h3>Absolute Change Calculator</h3>
            <label for="initial-value">Initial Value</label>
            <input type="number" step="0.01" id="initial-value">
            <label for="final-value">Final Value</label>
            <input type="number" step="0.01" id="final-value">
            <button onclick="calculateAbsoluteChange()">Calculate Change</button>
            <div id="absolute-change-result" class="result">Your result will appear here</div>
        </div>
        
        <div id="absolute-value" class="calculator">
            <h3>Absolute Value Calculator</h3>
            <label for="abs-value-number">Enter Number</label>
            <input type="number" step="0.01" id="abs-value-number">
            <button onclick="calculateAbsoluteValue()">Calculate Absolute Value</button>
            <div id="absolute-value-result" class="result">Your result will appear here</div>
        </div>
        
        <div id="fraction-operations" class="calculator">
            <h3>Fraction Operations Calculator</h3>
            <label for="first-fraction-num">First Fraction Numerator</label>
            <input type="number" id="first-fraction-num">
            <label for="first-fraction-den">First Fraction Denominator</label>
            <input type="number" id="first-fraction-den">
            <label for="fraction-operation">Operation</label>
            <select id="fraction-operation">
                <option value="add">Addition</option>
                <option value="subtract">Subtraction</option>
                <option value="multiply">Multiplication</option>
                <option value="divide">Division</option>
            </select>
            <label for="second-fraction-num">Second Fraction Numerator</label>
            <input type="number" id="second-fraction-num">
            <label for="second-fraction-den">Second Fraction Denominator</label>
            <input type="number" id="second-fraction-den">
            <button onclick="calculateFractionOperation()">Calculate</button>
            <div id="fraction-operation-result" class="result">Your result will appear here</div>
        </div>
        
        <div id="addition" class="calculator">
            <h3>Addition Calculator</h3>
            <label for="addition-numbers">Enter Numbers (comma separated)</label>
            <input type="text" id="addition-numbers">
            <button onclick="calculateSum()">Calculate Sum</button>
            <div id="addition-result" class="result">Your result will appear here</div>
        </div>
        
        <div id="average" class="calculator">
            <h3>Average Calculator</h3>
            <label for="average-numbers">Enter Numbers (comma separated)</label>
            <input type="text" id="average-numbers">
            <button onclick="calculateAverage()">Calculate Average</button>
            <div id="average-result" class="result">Your result will appear here</div>
        </div>
        
        <div id="cross-multiplication" class="calculator">
            <h3>Cross Multiplication Calculator</h3>
            <p>For equation a/b = c/d</p>
            <label for="cross-mult-a">a</label>
            <input type="number" step="0.01" id="cross-mult-a">
            <label for="cross-mult-b">b</label>
            <input type="number" step="0.01" id="cross-mult-b">
            <label for="cross-mult-c">c</label>
            <input type="number" step="0.01" id="cross-mult-c">
            <label for="cross-mult-d">d (leave empty to solve for d)</label>
            <input type="number" step="0.01" id="cross-mult-d">
            <button onclick="calculateCrossMultiplication()">Calculate</button>
            <div id="cross-mult-result" class="result">Your result will appear here</div>
        </div>
    </section>
    
    <footer>
        <h3>Math Calculators</h3>
        <p>A comprehensive collection of mathematical tools for all your calculation needs</p>
        <p>© 2025 Math Calculators. All rights reserved.</p>
    </footer>

    <script>
        // Percentage Calculators
        function calculateAveragePercentage() {
            const valuesInput = document.getElementById('avg-pct-values').value;
            const values = valuesInput.split(',').map(v => parseFloat(v.trim()));
            
            // Filter out NaN values
            const validValues = values.filter(v => !isNaN(v));
            
            if (validValues.length === 0) {
                document.getElementById('avg-pct-result').textContent = 'Please enter valid numbers';
                return;
            }
            
            const sum = validValues.reduce((acc, val) => acc + val, 0);
            const average = sum / validValues.length;
            
            document.getElementById('avg-pct-result').textContent = `Average: ${average.toFixed(2)}%`;
        }
        
        function convertFractionToPercent() {
            const numerator = parseFloat(document.getElementById('fraction-num').value);
            const denominator = parseFloat(document.getElementById('fraction-den').value);
            
            if (isNaN(numerator) || isNaN(denominator)) {
                document.getElementById('fraction-to-percent-result').textContent = 'Please enter valid numbers';
                return;
            }
            
            if (denominator === 0) {
                document.getElementById('fraction-to-percent-result').textContent = 'Denominator cannot be zero';
                return;
            }
            
            const percent = (numerator / denominator) * 100;
            document.getElementById('fraction-to-percent-result').textContent = `${numerator}/${denominator} = ${percent.toFixed(2)}%`;
        }
        
        function convertDecimalToPercent() {
            const decimal = parseFloat(document.getElementById('decimal-value').value);
            
            if (isNaN(decimal)) {
                document.getElementById('decimal-to-percent-result').textContent = 'Please enter a valid decimal number';
                return;
            }
            
            const percent = decimal * 100;
            document.getElementById('decimal-to-percent-result').textContent = `${decimal} = ${percent.toFixed(2)}%`;
        }
        
        function calculateDoublingTime() {
            const growthRate = parseFloat(document.getElementById('growth-rate').value);
            
            if (isNaN(growthRate)) {
                document.getElementById('doubling-time-result').textContent = 'Please enter a valid growth rate';
                return;
            }
            
            if (growthRate <= 0) {
                document.getElementById('doubling-time-result').textContent = 'Growth rate must be positive';
                return;
            }
            
            // Using the formula t = 70/r (Rule of 70)
            const doublingTime = 70 / growthRate;
            document.getElementById('doubling-time-result').textContent = `Doubling Time: ${doublingTime.toFixed(2)} time units`;
        }
        
        function calculatePercentage() {
            const x = parseFloat(document.getElementById('percentage-x').value);
            const y = parseFloat(document.getElementById('percentage-y').value);
            const calculationType = document.getElementById('percentage-calc-type').value;
            
            if (isNaN(x) || isNaN(y)) {
                document.getElementById('percentage-calc-result').textContent = 'Please enter valid numbers';
                return;
            }
            
            let result;
            switch (calculationType) {
                case 'percent-of':
                    result = `${x}% of ${y} = ${(x / 100 * y).toFixed(2)}`;
                    break;
                case 'percent-is':
                    if (y === 0) {
                        result = 'Cannot divide by zero';
                    } else {
                        result = `${x} is ${((x / y) * 100).toFixed(2)}% of ${y}`;
                    }
                    break;
                case 'percent-what':
                    if (y === 0) {
                        result = 'Percentage cannot be zero';
                    } else {
                        result = `${x} is ${y}% of ${(x / (y / 100)).toFixed(2)}`;
                    }
                    break;
                default:
                    result = 'Invalid calculation type';
            }
            
            document.getElementById('percentage-calc-result').textContent = result;
        }
        
        function calculatePercentageOfPercentage() {
            const firstPercent = parseFloat(document.getElementById('first-percentage').value);
            const secondPercent = parseFloat(document.getElementById('second-percentage').value);
            
            if (isNaN(firstPercent) || isNaN(secondPercent)) {
                document.getElementById('percentage-of-percentage-result').textContent = 'Please enter valid percentages';
                return;
            }
            
            const result = (firstPercent / 100) * (secondPercent / 100) * 100;
            document.getElementById('percentage-of-percentage-result').textContent = 
                `${firstPercent}% of ${secondPercent}% = ${result.toFixed(4)}%`;
        }
        
        // Algebra Calculators
        function solveAbsoluteValueEquation() {
            const equation = document.getElementById('abs-equation').value.trim();
            
            if (!equation) {
                document.getElementById('abs-equation-result').textContent = 'Please enter an equation';
                return;
            }
            
            try {
                // Extract parts from |expression|=value
                const parts = equation.split('=');
                if (parts.length !== 2) {
                    throw new Error('Invalid equation format. Use |expression|=value');
                }
                
                const absExpression = parts[0].trim();
                const rightSide = parseFloat(parts[1].trim());
                
                if (isNaN(rightSide)) {
                    throw new Error('Right side must be a number');
                }
                
                if (rightSide < 0) {
                    document.getElementById('abs-equation-result').textContent = 'No solution (absolute value cannot equal a negative number)';
                    return;
                }
                
                // Extract the expression inside ||
                if (!absExpression.startsWith('|') || !absExpression.endsWith('|')) {
                    throw new Error('Left side must be in |expression| format');
                }
                
                const expression = absExpression.substring(1, absExpression.length - 1);
                
                document.getElementById('abs-equation-result').textContent = 
                    `Solutions: ${expression} = ${rightSide} or ${expression} = ${-rightSide}`;
            } catch (error) {
                document.getElementById('abs-equation-result').textContent = `Error: ${error.message}`;
            }
        }
        
        function solveAbsoluteValueInequality() {
            const inequality = document.getElementById('abs-inequality').value.trim();
            
            if (!inequality) {
                document.getElementById('abs-inequality-result').textContent = 'Please enter an inequality';
                return;
            }
            
            try {
                // Check if it contains > or < or >= or <=
                let operator = '';
                let parts = [];
                
                if (inequality.includes('>=')) {
                    operator = '>=';
                    parts = inequality.split('>=');
                } else if (inequality.includes('<=')) {
                    operator = '<=';
                    parts = inequality.split('<=');
                } else if (inequality.includes('>')) {
                    operator = '>';
                    parts = inequality.split('>');
                } else if (inequality.includes('<')) {
                    operator = '<';
                    parts = inequality.split('<');
                } else {
                    throw new Error('Invalid inequality. Use >, <, >= or <=');
                }
                
                if (parts.length !== 2) {
                    throw new Error('Invalid inequality format');
                }
                
                const absExpression = parts[0].trim();
                const rightSide = parseFloat(parts[1].trim());
                
                if (isNaN(rightSide)) {
                    throw new Error('Right side must be a number');
                }
                
                // Extract the expression inside ||
                if (!absExpression.startsWith('|') || !absExpression.endsWith('|')) {
                    throw new Error('Left side must be in |expression| format');
                }
                
                const expression = absExpression.substring(1, absExpression.length - 1);
                
                let solution = '';
                if (operator === '>' || operator === '>=') {
                    const equalSign = (operator === '>=') ? '≥' : '>';
                    if (rightSide < 0 && operator === '>') {
                        solution = 'All real numbers (absolute value is always ≥ 0)';
                    } else if (rightSide <= 0 && operator === '>=') {
                        solution = 'All real numbers (absolute value is always ≥ 0)';
                    } else {
                        solution = `${expression} < ${-rightSide} or ${expression} ${equalSign} ${rightSide}`;
                    }
                } else {
                    const equalSign = (operator === '<=') ? '≤' : '<';
                    if (rightSide <= 0) {
                        solution = 'No solution (absolute value is always ≥ 0)';
                    } else {
                        solution = `${-rightSide} ${equalSign} ${expression} ${equalSign} ${rightSide}`;
                    }
                }
                
                document.getElementById('abs-inequality-result').textContent = `Solution: ${solution}`;
                
            } catch (error) {
                document.getElementById('abs-inequality-result').textContent = `Error: ${error.message}`;
            }
        }
        
        function calculatePolynomialOperation() {
            const firstPoly = document.getElementById('first-polynomial').value.trim();
            const secondPoly = document.getElementById('second-polynomial').value.trim();
            const operation = document.getElementById('polynomial-operation').value;
            
            if (!firstPoly || !secondPoly) {
                document.getElementById('polynomial-result').textContent = 'Please enter both polynomials';
                return;
            }
            
            try {
                let result = '';
                switch (operation) {
                    case 'add':
                        result = `(${firstPoly}) + (${secondPoly})`;
                        break;
                    case 'subtract':
                        result = `(${firstPoly}) - (${secondPoly})`;
                        break;
                    case 'multiply':
                        result = `(${firstPoly}) * (${secondPoly})`;
                        break;
                    case 'divide':
                        result = `(${firstPoly}) / (${secondPoly})`;
                        break;
                    default:
                        result = 'Invalid operation';
                }
                
                document.getElementById('polynomial-result').textContent = 
                    `Result: ${result}\nNote: This is a simplified representation. For actual computation, please enter the polynomials in standard form.`;
                
            } catch (error) {
                document.getElementById('polynomial-result').textContent = `Error: ${error.message}`;
            }
        }
        
        function calculateBinomialCoefficient() {
            const n = parseInt(document.getElementById('n-value').value);
            const k = parseInt(document.getElementById('k-value').value);
            
            if (isNaN(n) || isNaN(k)) {
                document.getElementById('binomial-result').textContent = 'Please enter valid integers';
                return;
            }
            
            if (n < 0 || k < 0) {
                document.getElementById('binomial-result').textContent = 'Values must be non-negative';
                return;
            }
            
            if (k > n) {
                document.getElementById('binomial-result').textContent = 'k cannot be greater than n';
                return;
            }
            
            // Calculate binomial coefficient using factorial
            function factorial(num) {
                if (num === 0 || num === 1) return 1;
                let result = 1;
                for (let i = 2; i <= num; i++) {
                    result *= i;
                }
                return result;
            }
            
            const coefficient = factorial(n) / (factorial(k) * factorial(n - k));
            document.getElementById('binomial-result').textContent = `C(${n},${k}) = ${coefficient}`;
        }
        
        function completeTheSquare() {
            const expression = document.getElementById('quadratic-expression').value.trim();
            
            if (!expression) {
                document.getElementById('square-completion-result').textContent = 'Please enter a quadratic expression';
                return;
            }
            
            try {
                // Simplified implementation for ax² + bx + c format
                document.getElementById('square-completion-result').textContent = 
                    `For the expression ${expression}, the completed square form would be a(x + b/(2a))² + (c - b²/(4a))`;
            } catch (error) {
                document.getElementById('square-completion-result').textContent = `Error: ${error.message}`;
            }
        }
        
        function calculateComplexOperation() {
            const firstComplex = document.getElementById('first-complex').value.trim();
            const secondComplex = document.getElementById('second-complex').value.trim();
            const operation = document.getElementById('complex-operation').value;
            
            if (!firstComplex || !secondComplex) {
                document.getElementById('complex-result').textContent = 'Please enter both complex numbers';
                return;
            }
            
            try {
                // Parse complex numbers of form a+bi
                function parseComplex(str) {
                    str = str.replace(/\s/g, '');
                    const isImag = str.endsWith('i');
                    
                    if (isImag) {
                        str = str.substring(0, str.length - 1);
                        if (str === '' || str === '+') return { real: 0, imag: 1 };
                        if (str === '-') return { real: 0, imag: -1 };
                    }
                    
                    const hasPlus = str.includes('+', 1);
                    const hasMinus = str.includes('-', 1);
                    
                    if (!hasPlus && !hasMinus) {
                        const num = parseFloat(str);
                        return isImag ? { real: 0, imag: num } : { real: num, imag: 0 };
                    }
                    
                    let index = -1;
                    if (hasPlus && hasMinus) {
                        index = Math.min(str.indexOf('+', 1), str.indexOf('-', 1));
                    } else if (hasPlus) {
                        index = str.indexOf('+', 1);
                    } else {
                        index = str.indexOf('-', 1);
                    }
                    
                    const realPart = parseFloat(str.substring(0, index));
                    const imagPart = parseFloat(str.substring(index));
                    
                    return { real: realPart, imag: imagPart };
                }
                
                // Perform complex operations
                const first = parseComplex(firstComplex);
                const second = parseComplex(secondComplex);
                let result = { real: 0, imag: 0 };
                
                switch (operation) {
                    case 'add':
                        result.real = first.real + second.real;
                        result.imag = first.imag + second.imag;
                        break;
                    case 'subtract':
                        result.real = first.real - second.real;
                        result.imag = first.imag - second.imag;
                        break;
                    case 'multiply':
                        result.real = first.real * second.real - first.imag * second.imag;
                        result.imag = first.real * second.imag + first.imag * second.real;
                        break;
                    case 'divide':
                        const denominator = second.real * second.real + second.imag * second.imag;
                        if (denominator === 0) {
                            throw new Error('Division by zero');
                        }
                        result.real = (first.real * second.real + first.imag * second.imag) / denominator;
                        result.imag = (first.imag * second.real - first.real * second.imag) / denominator;
                        break;
                    default:
                        throw new Error('Invalid operation');
                }
                
                // Format the result
                let resultStr = result.real.toFixed(4);
                if (result.imag >= 0) {
                    resultStr += '+';
                }
                resultStr += result.imag.toFixed(4) + 'i';
                
                // Remove trailing zeros in decimal part
                resultStr = resultStr.replace(/(\.\d*?)0+([+\-]|i$)/g, '$1$2');
                resultStr = resultStr.replace(/\.$/, '');
                
                document.getElementById('complex-result').textContent = `Result: ${resultStr}`;
                
            } catch (error) {
                document.getElementById('complex-result').textContent = `Error: ${error.message}`;
            }
        }
        
        // Arithmetic Calculators
        function calculateAbsoluteChange() {
            const initialValue = parseFloat(document.getElementById('initial-value').value);
            const finalValue = parseFloat(document.getElementById('final-value').value);
            
            if (isNaN(initialValue) || isNaN(finalValue)) {
                document.getElementById('absolute-change-result').textContent = 'Please enter valid numbers';
                return;
            }
            
            const absoluteChange = Math.abs(finalValue - initialValue);
            const percentageChange = (absoluteChange / Math.abs(initialValue)) * 100;
            
            document.getElementById('absolute-change-result').textContent = 
                `Absolute Change: ${absoluteChange.toFixed(2)}\nPercentage Change: ${percentageChange.toFixed(2)}%`;
        }
        
        function calculateAbsoluteValue() {
            const number = parseFloat(document.getElementById('abs-value-number').value);
            
            if (isNaN(number)) {
                document.getElementById('absolute-value-result').textContent = 'Please enter a valid number';
                return;
            }
            
            const absoluteValue = Math.abs(number);
            document.getElementById('absolute-value-result').textContent = `|${number}| = ${absoluteValue}`;
        }
        
        function calculateFractionOperation() {
            const num1 = parseInt(document.getElementById('first-fraction-num').value);
            const den1 = parseInt(document.getElementById('first-fraction-den').value);
            const num2 = parseInt(document.getElementById('second-fraction-num').value);
            const den2 = parseInt(document.getElementById('second-fraction-den').value);
            const operation = document.getElementById('fraction-operation').value;
            
            if (isNaN(num1) || isNaN(den1) || isNaN(num2) || isNaN(den2)) {
                document.getElementById('fraction-operation-result').textContent = 'Please enter valid numbers';
                return;
            }
            
            if (den1 === 0 || den2 === 0) {
                document.getElementById('fraction-operation-result').textContent = 'Denominators cannot be zero';
                return;
            }
            
            // Find GCD for simplifying fractions
            function gcd(a, b) {
                a = Math.abs(a);
                b = Math.abs(b);
                while (b) {
                    const t = b;
                    b = a % b;
                    a = t;
                }
                return a;
            }
            
            // Simplify fraction
            function simplify(numerator, denominator) {
                if (numerator === 0) return { num: 0, den: 1 };
                
                const divisor = gcd(numerator, denominator);
                return {
                    num: numerator / divisor,
                    den: denominator / divisor
                };
            }
            
            let resultNum, resultDen;
            
            switch (operation) {
                case 'add':
                    resultNum = num1 * den2 + num2 * den1;
                    resultDen = den1 * den2;
                    break;
                case 'subtract':
                    resultNum = num1 * den2 - num2 * den1;
                    resultDen = den1 * den2;
                    break;
                case 'multiply':
                    resultNum = num1 * num2;
                    resultDen = den1 * den2;
                    break;
                case 'divide':
                    if (num2 === 0) {
                        document.getElementById('fraction-operation-result').textContent = 'Cannot divide by zero';
                        return;
                    }
                    resultNum = num1 * den2;
                    resultDen = den1 * num2;
                    break;
                default:
                    document.getElementById('fraction-operation-result').textContent = 'Invalid operation';
                    return;
            }
            
            // Handle negative denominators
            if (resultDen < 0) {
                resultNum = -resultNum;
                resultDen = -resultDen;
            }
            
            const simplified = simplify(resultNum, resultDen);
            
            document.getElementById('fraction-operation-result').textContent = 
                `Result: ${simplified.num}/${simplified.den}`;
        }
        
        function calculateSum() {
            const numbersInput = document.getElementById('addition-numbers').value;
            const numbers = numbersInput.split(',').map(n => parseFloat(n.trim()));
            
            // Filter out NaN values
            const validNumbers = numbers.filter(n => !isNaN(n));
            
            if (validNumbers.length === 0) {
                document.getElementById('addition-result').textContent = 'Please enter valid numbers';
                return;
            }
            
            const sum = validNumbers.reduce((acc, val) => acc + val, 0);
            document.getElementById('addition-result').textContent = `Sum: ${sum}`;
        }
        
        function calculateAverage() {
            const numbersInput = document.getElementById('average-numbers').value;
            const numbers = numbersInput.split(',').map(n => parseFloat(n.trim()));
            
            // Filter out NaN values
            const validNumbers = numbers.filter(n => !isNaN(n));
            
            if (validNumbers.length === 0) {
                document.getElementById('average-result').textContent = 'Please enter valid numbers';
                return;
            }
            
            const sum = validNumbers.reduce((acc, val) => acc + val, 0);
            const average = sum / validNumbers.length;
            
            document.getElementById('average-result').textContent = `Average: ${average.toFixed(4)}`;
        }
        
        function calculateCrossMultiplication() {
            const a = parseFloat(document.getElementById('cross-mult-a').value);
            const b = parseFloat(document.getElementById('cross-mult-b').value);
            const c = parseFloat(document.getElementById('cross-mult-c').value);
            const dInput = document.getElementById('cross-mult-d').value;
            
            if (isNaN(a) || isNaN(b) || isNaN(c)) {
                document.getElementById('cross-mult-result').textContent = 'Please enter valid numbers for a, b, and c';
                return;
            }
            
            if (b === 0 || (dInput === '' && c === 0)) {
                document.getElementById('cross-mult-result').textContent = 'Division by zero error';
                return;
            }
            
            // If d is not provided, solve for d
            if (dInput === '') {
                const d = (b * c) / a;
                document.getElementById('cross-mult-result').textContent = `d = ${d.toFixed(4)}`;
            } else {
                // If all values are provided, verify if the proportion is true
                const d = parseFloat(dInput);
                if (isNaN(d)) {
                    document.getElementById('cross-mult-result').textContent = 'Please enter a valid number for d';
                    return;
                }
                
                const leftSide = a / b;
                const rightSide = c / d;
                const isEqual = Math.abs(leftSide - rightSide) < 1e-10; // Untuk perbandingan angka floating-point
                
                document.getElementById('cross-mult-result').textContent = 
                    isEqual ? `${a}/${b} = ${c}/${d} (True)` : `${a}/${b} ≠ ${c}/${d} (False)`;
            }
        }
    </script>
</body>
</html>
